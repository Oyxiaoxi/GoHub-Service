# 生产环境配置示例
# 复制此文件为 .env 并根据实际情况修改

# ===================================
# 应用配置
# ===================================
APP_NAME=GoHub-Service
APP_ENV=production                          # ⚠️ 必须设置为 production
APP_KEY=CHANGE_THIS_32_CHARACTER_KEY_HERE  # ⚠️ 必须修改为强随机字符串
APP_DEBUG=false                             # ⚠️ 生产环境必须关闭
APP_URL=https://api.yourdomain.com
APP_PORT=3000
TIMEZONE=Asia/Shanghai

# ===================================
# 数据库配置
# ===================================
DB_CONNECTION=mysql
DB_HOST=127.0.0.1                          # 建议使用内网地址
DB_PORT=3306
DB_DATABASE=gohub_production
DB_USERNAME=gohub_user                     # ⚠️ 不要使用 root
DB_PASSWORD=STRONG_DB_PASSWORD_HERE        # ⚠️ 必须使用强密码
DB_DEBUG=0                                  # ⚠️ 生产环境关闭 SQL 日志

# ===================================
# Redis 配置
# ===================================
REDIS_HOST=127.0.0.1                       # 建议使用内网地址
REDIS_PORT=6379
REDIS_PASSWORD=STRONG_REDIS_PASSWORD_HERE  # ⚠️ 必须设置强密码
REDIS_CACHE_DB=0
REDIS_MAIN_DB=1

# ===================================
# JWT 配置
# ===================================
JWT_EXPIRE_TIME=7200                       # 2小时（秒）
JWT_MAX_REFRESH_TIME=604800                # 7天（秒）
JWT_KEY=CHANGE_JWT_SECRET_KEY_HERE         # ⚠️ 必须修改为强随机字符串

# ===================================
# API 签名验证配置
# ===================================
# 用于防重放攻击和数据篡改
# ⚠️ 生产环境必须设置强随机密钥（32位以上），不要与 APP_KEY 相同
SIGNATURE_SECRET=CHANGE_THIS_TO_STRONG_32_CHAR_RANDOM_SECRET_KEY

# ===================================
# 邮件配置
# ===================================
MAIL_HOST=smtp.yourdomain.com
MAIL_PORT=587
MAIL_USERNAME=noreply@yourdomain.com
MAIL_PASSWORD=your_mail_password
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME=GoHub-Service
MAIL_ENCRYPTION=tls

# ===================================
# 短信配置（阿里云）
# ===================================
SMS_ALIYUN_ACCESS_ID=YOUR_ACCESS_ID
SMS_ALIYUN_ACCESS_SECRET=YOUR_ACCESS_SECRET
SMS_ALIYUN_SIGN_NAME=YOUR_SIGN_NAME
SMS_ALIYUN_TEMPLATE_CODE=YOUR_TEMPLATE_CODE

# ===================================
# 验证码配置
# ===================================
VERIFY_CODE_LENGTH=6
VERIFY_CODE_EXPIRE=15                      # 15分钟

# ===================================
# 日志配置
# ===================================
LOG_TYPE=daily                             # daily: 每日日志, single: 单文件
LOG_LEVEL=info                             # ⚠️ 生产环境使用 info，不要用 debug
LOG_MAX_SIZE=100                           # 日志文件最大 100MB
LOG_MAX_BACKUPS=30                         # 保留 30 个备份
LOG_MAX_AGE=30                             # 保留 30 天
LOG_COMPRESS=true                          # 压缩旧日志

# ===================================
# 文件存储配置
# ===================================
STORAGE_BASE_PATH=/var/www/gohub/public/uploads  # 使用绝对路径
STORAGE_PUBLIC_PREFIX=/uploads
STORAGE_MAX_SIZE_MB=2                      # 最大 2MB
STORAGE_MAX_IMAGE_WIDTH=2048
STORAGE_JPEG_QUALITY=85
STORAGE_ALLOWED_EXT=jpg,jpeg,png,gif,webp

# ===================================
# CORS 配置
# ===================================
# ⚠️ 生产环境只允许特定域名
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ===================================
# 限流配置
# ===================================
LIMITER_DEFAULT_MESSAGE=请求过于频繁，请稍后再试

# 全局限流（每小时）
LIMIT_GLOBAL_IP_RATE=1000-H                # 未认证用户
LIMIT_AUTH_IP_RATE=5000-H                  # 已认证用户

# 接口限流（每小时）
LIMIT_SIGNUP_EXIST_RATE=60-H               # 注册检查接口
LIMIT_VERIFY_PHONE_RATE=10-H               # 手机验证码（减少到10次）
LIMIT_VERIFY_EMAIL_RATE=10-H               # 邮箱验证码（减少到10次）
LIMIT_VERIFY_CAPTCHA_RATE=20-H             # 图形验证码

# ===================================
# 内容安全配置
# ===================================
CONTENT_CHECK_ENABLED=true
SENSITIVE_WORD_FILTER_ENABLED=true
SENSITIVE_WORD_REPLACEMENT=***
XSS_PROTECTION_ENABLED=true
MAX_CONTENT_LENGTH=10000                   # 内容最大长度
MAX_TITLE_LENGTH=200                       # 标题最大长度
ALLOW_HTML_TAGS=false                      # 是否允许 HTML 标签
IMAGE_CHECK_ENABLED=true
MAX_IMAGE_SIZE=2097152                     # 图片最大 5MB
AUDIT_LOG_ENABLED=true

# ===================================
# 第三方服务（可选）
# ===================================

# Sentry 错误追踪
# SENTRY_DSN=https://your-sentry-dsn

# AWS S3 存储（可选）
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=us-east-1
# AWS_BUCKET=

# 阿里云 OSS 存储（可选）
# ALIYUN_ACCESS_KEY_ID=
# ALIYUN_ACCESS_KEY_SECRET=
# ALIYUN_OSS_ENDPOINT=
# ALIYUN_OSS_BUCKET=
